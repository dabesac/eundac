<script src="/js/bootbox.min.js"></script>

<input type="hidden" id="successProfile" value="<?php echo $this->success ?>">
<div id="alertCompleteProfile" class="alert alert-danger hidden">
	<h4><span class="glyphicon glyphicon-exclamation-sign"></span> ACTUALIZA TU PERFIL : Información Estadística y Socio-Económica</h4>
	<p>Por favor lee las siguientes instrucciones :</p>
	<ol>
		<li>Para empezar tiene los siguientes datos para rellenar :</li>
		<ul>
			<li>Información Principal <strong>(obligatorio)</strong></li>
			<li>Datos Familiares <strong>(obligatorio)</strong></li>
			<li>Datos Académicos <strong>(obligatorio)</strong></li>
			<li>Datos Estadísticos <strong>(obligatorio)</strong></li>
			<li>Datos Laborales (opcional, si es que ya trabajaste o hiciste prácticas en algun lugar)</li>
			<li>Intereses <strong>(Obligatorio, todo tenemos hobbies)</strong></li>
		</ul>
		<li>En la parte derecha existe todo un <strong>Menú de Navegación</strong> dale click a cualquiera para empezar.</li>
		<li>Ahora, existen <strong>3 botones escenciales </strong> en todo el Perfil que le ayudarán a interactuar con este:</li>
			<ul>
				<li>El boton "Nuevo" <a href="##" class="btn btn-default btn-sm">Nuevo</a>, sirve para <strong>ingresar</strong> nuevos datos.</li>
				<li>El boton "Editar" <span class="glyphicon glyphicon-pencil"></span> que esta representado por un lápiz, sirve para <strong>editar</strong> datos ya existentes.</li>
				<li>Por ultimo el boton "Eliminar" <span class="glyphicon glyphicon-remove"></span>, que obviamente <strong>elimina</strong> datos que considera usted no deberían estar en su perfil.</li>
			</ul>
	</ol>
	<br>
	<p class="pull-right"><a id="btnCompleteProfile" href="##" class="btn btn-default"><span class="text-success">Actualizar Perfil</span></a></p>
	<br><br>
</div>
<div class="container">
	<div class="panel panel-default">
	<div class="row">
		<br>
		<div class="col-md-1">
			<img class='img-avatar' src="/fotos/<?php echo $this->datos[0]['uid']?>.jpg" onerror="imgError(this);" alt="Foto de Perfil" align="center" >
		</div>
		<div class="col-md-5">
			<h3 class="text-right"><b><?php echo $this->datos[0]['fullname']?></b></h3>
			<br>
			<h5 class="text-right">Código <b><?php echo $this->datos[0]['uid']?></b></h5>
		</div>
		<div class="col-md-5">
			<blockquote>
				<h3>Facultad de <?php echo $this->datos[1][0]['nomfac']?></h3>
				<h3>Escuela de <?php echo $this->datos[1][0]['nomesc']?></h3>
			</blockquote>
		</div>
		<div class="col-md-1">
			<br>
		  	<h2> 
		  	<a id="printRecord" class="text-warning" data-placement="left" data-toggle="popover" title="Record de Notas" data-container="body" data-content="Imprime aqui tu record de notas"
		  		href="/report/recordnotas/print/uid/<?php echo base64_encode($this->datos[0]['uid'])?>/escid/<?php echo base64_encode($this->datos[0]['escid'])?>/eid/<?php echo base64_encode($this->datos[0]['eid'])?>/oid/<?php echo base64_encode($this->datos[0]['oid'])?>/subid/<?php echo base64_encode($this->datos[0]['subid'])?>/pid/<?php echo base64_encode($this->datos[0]['pid'])?>"><span class="glyphicon glyphicon-print"></span></a></h2>
		</div>
	</div>
	</div><!--Panel-->
</div>

<div class="container">
	<div>
		<ul class="nav nav-tabs" id="profileTab">
			<li class="active"><a href="#signinCurrent" id="btnmainsignin"><h5 class="text-info"><span class="glyphicon glyphicon-th text-muted"></span> Matrícula Actual</h5></a></li>
			<li><a href="#signinCurriculum"><h5 class="text-info"><span class="glyphicon glyphicon-th text-muted"></span> Matrículas por Currícula</h5></a></li>
			<li><a href="#signinRealized"><h5 class="text-info"><span class="glyphicon glyphicon-th text-muted"></span> Matrículas Realizadas</h5></a></li>
			<li><a href="#info" id="btnmaininfo"><h5 class="text-info"><span class="glyphicon glyphicon-th text-muted"></span> Información</h5></a></li>
			<li><a class="hidden"></a></li>
		</ul>
		<div class="tab-content" style="margin: 0px; padding: 0px; min-height: 500px;" >
			<div class="tab-pane  active in fade" id="signinCurrent"></div>
			<div class="tab-pane fade" id="signinCurriculum"></div>
			<div class="tab-pane fade" id="signinRealized"></div>
			<div class="tab-pane fade" id="info" ></div>
		</div>
	</div>
</div>

<script>
function imgError(image) {
	var avatar = '<?php echo $this->avatar_default?>'; 
    image.onerror = "";
    image.src = "/img/default_avatar_"+avatar+".jpg";
    return true;
}

$(function () {
	//Actualizar perfil
	var successProfile = $('#successProfile').val();
	if (successProfile == 'no') {
		$('#alertCompleteProfile').removeClass('hidden');
    	$('#profileTab li:eq(3) a').tab('show');
	};
	$('#btnCompleteProfile').click(function(){
		$('html,body').animate({
	        scrollTop: $("#profileTab").offset().top
	    }, 500);
	});

	$('#printRecord').popover('show');
	setTimeout(function() {
	  $('#printRecord').popover('hide');
	}, 4000);

	$('#printRecord').click(function(){
		$('#printRecord').popover('destroy');
	});

	$('#printRecord').hover(function(){
		$('#printRecord').popover('toggle');
	});

	$("#signinCurrent").load("/profile/public/studentsigncurrent");

	$('#signinCurriculum').load('/profile/public/studentsignpercur');

    $("#signinRealized").load("/register/registerealized/index/pid/<?php echo $this->data['pid']?>/uid/<?php echo $this->data['uid']?>/escid/<?php echo $this->data['escid']?>/subid/<?php echo $this->data['subid']?>/perid/<?php echo $this->data['perid']?>/rid/<?php echo $this->data['rid']?>");

	$("#info").load("/profile/public/studentinfo");

	$('#profileTab a').click(function (e) {
		e.preventDefault()
	    $(this).tab('show');
	});
	  
});
</script>

